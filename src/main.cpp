//  ░▒▓██████▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓████████▓▒░░▒▓██████▓▒░▒▓████████▓▒░      ░▒▓████████▓▒░▒▓███████▓▒░ ░▒▓██████▓▒░░▒▓█▓▒░▒▓███████▓▒░░▒▓████████▓▒░ 
// ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░ ░▒▓█▓▒░          ░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░        
// ░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░ ░▒▓█▓▒░          ░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░      ░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░        
// ░▒▓█▓▒░      ░▒▓████████▓▒░▒▓██████▓▒░ ░▒▓████████▓▒░ ░▒▓█▓▒░          ░▒▓██████▓▒░ ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒▒▓███▓▒░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓██████▓▒░   
// ░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░ ░▒▓█▓▒░          ░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░        
// ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░ ░▒▓█▓▒░          ░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░        
//  ░▒▓██████▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓████████▓▒░▒▓█▓▒░░▒▓█▓▒░ ░▒▓█▓▒░          ░▒▓████████▓▒░▒▓█▓▒░░▒▓█▓▒░░▒▓██████▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓████████▓▒░ 

#include "Process.hpp"
#include "Tracer.hpp"
#include "MemoryParser.hpp"
#include "App.hpp"
#include <iostream>

#define GRAPHICAL


int main(int ac, char **av) {
    std::unordered_map<std::string, pid_t> ProcessList = CheatEngine::Memory::Process::getProcessMap();
    // CheatEngine::Memory::Tracer tracer(std::atoi(av[1]));

    // if (tracer.attach()) {
    //     std::cout << "Attached to process" << std::endl;
    // } else {
    //     std::cout << "Failed to attach to process" << std::endl;
    // }

    // if (tracer.detach()) {
    //     std::cout << "Detached from process" << std::endl;
    // } else {
    //     std::cout << "Failed to detach from process" << std::endl;
    // }
    // 
    std::cout << "process:" << std::endl;
    for (auto process : ProcessList) {
        std::cout << process.first << " " << process.second << std::endl;
    }
    // CheatEngine::Memory::MemoryParser parser(48514);
    // parser.filterRegions("r-xp");
    // auto regions = parser.getRegions();
    // for (auto &region : regions) {
    //     std::cout << "Start: " << std::hex << region.startAddr << " End: " << std::hex << region.endAddr << " Permissions: " << region.permissions << " Pathname: " << region.pathname << std::endl;
    // }

#ifdef GRAPHICAL
    CheatEngine::Graphical::App *app = new CheatEngine::Graphical::App({800, 600});
    app->run();
#endif

    return 0;
}
